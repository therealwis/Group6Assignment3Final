<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Report</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/css/custom.css">
        <link rel="stylesheet" href="/css/style.css">
    </head>
    <body>
           
        <div id="report">
                <div id="printBtn" class="printBtnContainer">
                    <button id="btnPrint" onclick="printReport('report')">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="print-icon">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z" />
                        </svg>
                        Print Report
                    </button>
                </div>
                <div id="report-header">
                    <div class="report-header-container-logo">
                        <img src="/img/logo.png"/>
                    </div>
                    
                    <div class="report-header-container-brand">
                        <h3>Little Einsteins Pvt<br> Primary School</h3>
                        <p class="end">Where kids shine..</p>
                    </div>
                </div>

                
                <h2 class="text-center m-2">STUDENT REPORT CARD</h4>

                
                <div style="font-size: 1rem; font-weight: 500;" class="flex">
                    <div>
                        <p class="mt-1">CLASS</p>
                        <p class="mt-1">TERM</p>
                        <p class="mt-1">STUDENT NAME</p>
                    </div>
                    <div class="ml-4">
                        <p class="mt-1">:</p>
                        <p class="mt-1">:</p>
                        <p class="mt-1">:</p>
                    </div>
                    <div class="ml-4">
                        <p class="mt-1">Grade 7</p>
                        <p class="mt-1">3rd Term</p>
                        <% student.forEach(function(rows) { %>
                            <p class="mt-1"><%= rows.firstname %>&nbsp;<%= rows.surname %></p>
                        <% }); %>
                    </div>
                </div>

                <div class="reportCardTableHolder">
                    <table>
                        <thead>
                            <th>SUBJECT NAME</th>
                            <th>REMARKS</th>
                            <th>GRADE</th>
                        </thead>
                        
                        <tbody>
                            <% let total_marks = 0; %> 
                            <% subjects.forEach(function(rowss) { %>
                                
                                <tr>
                                    <td class="align-start"><%= rowss.name %></td>
                                    <% grades.forEach(function(rowsss) { %>
                                        
                                            <% if (rowss.id == rowsss.subject_id) { %>
                                                <% if (rowsss.score >= 90) { %>
                                                    <td class="align-start">A+ </td>
                                                <%} else if (rowsss.score >= 80) { %>
                                                    <td class="align-start">A </td>
                                                <%} else if (rowsss.score >= 75) { %>
                                                    <td class="align-start">B+ </td>
                                                <%} else if (rowsss.score >= 70) { %>
                                                    <td class="align-start">B </td>
                                                <%} else if (rowsss.score >= 60) { %>
                                                    <td class="align-start">C </td>
                                                <%} else if (rowsss.score >= 50) { %>
                                                    <td class="align-start">D </td>
                                                <%} else { %>
                                                    <td class="align-start">F </td>
                                                <% } %>  
                                                <td class="align-start"><%= rowsss.score %> </td>
                                                <% total_marks += rowsss.score; %>
                                            <%} else { %>
                                                
                                            <% } %>
                                        
                                    <% }); %>
                                </tr>
                            <% }); %>
                            
                           <tr style="background-color: grey; color: white">
                                <td style="background-color: grey; color: white" class="align-start">Average</td>
                                <% if (parseInt(total_marks/9) >= 90) { %>
                                    <td class="align-start">A+ </td>
                                <%} else if (parseInt(total_marks/9) >= 80) { %>
                                    <td class="align-start">A </td>
                                <%} else if (parseInt(total_marks/9) >= 75) { %>
                                    <td class="align-start">B+ </td>
                                <%} else if (parseInt(total_marks/9) >= 70) { %>
                                    <td class="align-start">B </td>
                                <%} else if (parseInt(total_marks/9) >= 60) { %>
                                    <td class="align-start">C </td>
                                <%} else if (parseInt(total_marks/9) >= 50) { %>
                                    <td class="align-start">D </td>
                                <%} else { %>
                                    <td class="align-start">F </td>
                                <% } %>  
                                <td><%= parseInt(total_marks/9) %></td>
                           </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Signature -->
                <div class="flex">
                    <div style="width: 40%;"></div>
                    <div style="width: 60%; text-align: center;" >
                        <img src="/img/sign.png" height="50px" />
                        <p style="font-size: 15px; text-align: center;"><b>SCHOOL PRINCIPLE</b><br>(BRIGHT MANYENGO)</p>
                    </div>
                </div>    
        </div>

        <script>
            function printReport(area){
                const printBtn = document.getElementById('btnPrint');
                printBtn.innertext = "";
                printBtn.remove();
                const printContent = document.getElementById(area).innerHTML;
                
                const printBtnContainer = document.getElementById('printBtn');
             
                printBtnContainer.remove();
                
                const originalContent = document.body.innerHTML;
                document.body.innerHTML = printContent;
                window.print();
                document.body.innerHTML = originalContent;
            }
        </script>
    </body>
</html> 
